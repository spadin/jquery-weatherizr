(function(d){function b(g){b.data=jQuery.Deferred();b.init=function(h){d.get("http://pipes.yahoo.com/pipes/pipe.run?_id=dd8dd58983068f8a245d69afd8946443&_render=json&location="+escape(h)).success(function(a){var e=a.value.items[0].current_conditions.condition.data;e=e.toLowerCase().replace(/\s/g,"_");d("body").addClass(e);var f={current:{code:e,condition:a.value.items[0].current_conditions.condition.data,temperature:{fahrenheit:a.value.items[0].current_conditions.temp_f.data,celcius:a.value.items[0].current_conditions.temp_f.data},
humidity:a.value.items[0].current_conditions.icon.data,icon:"http://google.com"+a.value.items[0].current_conditions.icon.data,wind:a.value.items[0].current_conditions.wind_condition.data.replace(/Wind: /g,"")},forecast:[]};d.each(a.value.items[0].forecast_conditions,function(i,c){f.forecast.push({day:c.day_of_week.data,low:c.low.data,high:c.high.data,icon:"http://google.com"+c.icon.data,condition:c.condition.data})});b.data.resolve(f)});return b.data.promise()};return b.init(g)}d.extend({weatherizr:b})})(jQuery);
